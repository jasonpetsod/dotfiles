#!/bin/bash

SYNCROOT=~/.sync

# cd to the repository
cd $SYNCROOT

if [ -n "`hg st`" ]; then
    echo "WARNING: uncommitted changes in $SYNCROOT" >&2
fi

hg pull https://hg.quadco.net/sync
hg up

if [ -x $SYNCROOT/sync-run ]; then
    $SYNCROOT/sync-run
else
    echo "sync-run is not executable"
    exit 1
fi
