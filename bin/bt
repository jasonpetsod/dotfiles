#!/bin/bash

host=`hostname -s`
path=${PWD/$HOME/\~}

if [ -n "$SSH_CONNECTION" ]; then
    title="$host $path"
else
    title="$path"
fi

if [ "`uname`" == "Linux" ]; then
    sed="sed -r"
elif [ "`uname`" == "Darwin" ]; then
    sed="sed -E"
fi

if [ ${#title} -gt 20 ]; then
    path=`echo $path | $sed 's#^([^/]+)?/.*/(.+)$#\1/*/\2#'`
fi

if [ -n "$SSH_CONNECTION" ]; then
    title="$host $path"
else
    title="$path"
fi

echo -n "$title"
